#CREATE TABLE STATEMENTS(INVOLVED IN FUNCTIONS)

CREATE TABLE EMPLOYEE(
	NAME VARCHAR(20),
	AGE INT,
	PH_NO VARCHAR(10),
	EMPLOYEE_ID INT,
	SHIFT_TIME VARCHAR(20),
	PRIMARY KEY(EMPLOYEE_ID)
);

CREATE TABLE CUSTOMERS(
	NAME VARCHAR(20),
	PH_NO VARCHAR(10),
	ADDRESS VARCHAR(30),
	CUSTOMER_ID INT,
	GENDER VARCHAR(1),
	EMPLOYEE_ID INT,
	PRIMARY KEY(CUSTOMER_ID),
	FOREIGN KEY(EMPLOYEE_ID) REFERENCES EMPLOYEE(EMPLOYEE_ID) ON DELETE SET NULL
);

CREATE TABLE WAREHOUSE(
	ID INT,
	NAME VARCHAR(20),
	LOCATION VARCHAR(30),
	PRIMARY KEY(ID)
);


CREATE TABLE DRUG(
	NAME VARCHAR(30),
	COST REAL,
	TYPE VARCHAR(20),
	BARCODE INT,
	MANUFACTURING_DATE DATE,
	MANUFACTURER_NAME VARCHAR(20),
	EXPIRY_DATE DATE,
	PRIMARY KEY(BARCODE)
);

CREATE TABLE DOCTOR(
	NAME VARCHAR(20),
	AGE INT,
	PH_NO VARCHAR(10),
	LICENSE INT,
	CLINIC_ADDRESS VARCHAR(30),
	PRIMARY KEY(LICENSE)
);

CREATE TABLE MANUFACTURER(
	NAME VARCHAR(20),
	ADDRESS VARCHAR(30),
	LICENSE INT,
	PRIMARY KEY(LICENSE)
);

CREATE TABLE SUPPLIER(
	NAME VARCHAR(20),
	ADDRESS VARCHAR(30),
	LICENSE INT,
	PRIMARY KEY(LICENSE)
);

CREATE TABLE STOCKS(
	BARCODE INT,
	ID INT,
	PRIMARY KEY(BARCODE,ID),
	FOREIGN KEY(BARCODE) REFERENCES DRUG(BARCODE) ON DELETE SET NULL,
	FOREIGN KEY(ID) REFERENCES WAREHOUSE(ID) ON DELETE SET NULL
);
	

CREATE TABLE BUYS(
	BARCODE INT,
	CUSTOMER_ID INT,
	PRIMARY KEY(BARCODE,CUSTOMER_ID),
	FOREIGN KEY(CUSTOMER_ID) REFERENCES CUSTOMER(CUSTOMER_ID) ON DELETE SET NULL,
	FOREIGN KEY(BARCODE) REFERENCES DRUG(BARCODE) ON DELETE SET NULL
);

CREATE TABLE MANUFACTURES(
	BARCODE INT,
	MLICENSE INT,
	PRIMARY KEY(BARCODE,MLICENSE),
	FOREIGN KEY(BARCODE) REFERENCES DRUG(BARCODE) ON DELETE SET NULL,
	FOREIGN KEY(MLICENSE) REFERENCES MANUFACTURER(LICENSE) ON DELETE SET NULL
);

CREATE TABLE PRESCRIBES(
	BARCODE INT,
	DLICENSE INT,
	PRIMARY KEY(BARCODE,DLICENSE),
	FOREIGN KEY(BARCODE) REFERENCES DRUG(BARCODE) ON DELETE SET NULL,
	FOREIGN KEY(DLICENSE) REFERENCES DOCTOR(LICENSE) ON DELETE SET NULL
);

CREATE TABLE SUPPLIES(
	MLICENSE INT,
	SLICENSE INT,
	PRIMARY KEY(MLICENSE,SLICENSE),
	FOREIGN KEY(MLICENSE) REFERENCES MANUFACTURER(LICENSE) ON DELETE SET NULL,
	FOREIGN KEY(SLICENSE) REFERENCES SUPPLIER(LICENSE) ON DELETE SET NULL
);

CREATE TABLE CONTACTS(
	EMPLOYEE_ID INT,
	SLICENSE INT,
	PRIMARY KEY(EMPLOYEE_ID,SLICENSE),
	FOREIGN KEY(EMPLOYEE_ID) REFERENCES EMPLOYEE(EMPLOYEE_ID) ON DELETE SET NULL,
	FOREIGN KEY(SLICENSE) REFERENCES SUPPLIER(LICENSE) ON DELETE SET NULL
);

#INSERT FUNCTION

INSERT INTO EMPLOYEE VALUES('&NAME',&AGE,'&PH_NO',&EMPLOYEE_ID,'&SHIFT_TIME');
INSERT INTO CUSTOMERS VALUES('&NAME','&PH_NO','&ADDRESS',&CUSTOMER_ID,'&GENDER',&EMPLOYEE_ID);
INSERT INTO WAREHOSE VALUES(&ID,'&NAME','&LOCATION');

#SELECT FUNCTION

SELECT*FROM EMPLOYEE;
SELECT*FROM CUSTOMERS;
SELECT*FROM WAREHOUSE;

#UPDATE FUNCTION

UPDATE EMPLOYEE
	SET PH_NO='XXX'
WHERE EMPLOYEE_ID=X;

UPDATE CUSTOMERS
	SET ADDRESS='XXX',
		NAME='XXX'
WHERE CUSTOMER_ID=X;

UPDATE WAREHOUSE
	SET LOCATION='XXX'
WHERE ID=X;

#DELETE FUNCTION

DELETE FROM EMPLOYEE
	WHERE EMPLOYEE_ID=X;

DELETE FROM CUSTOMERS
	WHERE CUSTOMER_ID=X;

DELETE FROM WAREHOUSE
	WHERE ID=X;



